# Effective Auth API

Небольшой учебный backend-сервис на **FastAPI** с собственной системой аутентификации и авторизации на основе JWT и ACL (роль -> права на ресурсы).

Проект показывает:

- регистрацию / логин / мягкое удаление пользователя;
- авторизацию по ролям и правилам (таблицы `roles` и `access_roles_rules`);
- разграничение доступа к эндпоинтам (401 / 403);
- автозаполнение БД тестовыми данными при старте (роли, админ, ACL-правила, пользователи).

---

## Стек

- Python, FastAPI
- SQLAlchemy (async) + PostgreSQL
- Alembic
- Poetry
- Docker / docker-compose
- JWT на RSA-ключах (`jwt-private.pem` / `jwt-public.pem`)

---

## Настройка JWT-ключей

JWT-токены подписываются RSA-ключами. В репозитории ожидается директория `cert/`, в которой должны лежать:

- `jwt-private.pem` — приватный ключ для подписания токенов;  
- `jwt-public.pem` — публичный ключ для валидации подписи токена.

Без этих файлов сервис не сможет корректно выпускать и проверять JWT (вставьт в эти файлы приватный и публичный ключи). 

## Запуск

В корне проекта введите команду:
`docker-compose up --build`

Сервис api при старте:

- применит миграции alembic upgrade head;

- запустит fill_test_data.py — автозаполнение БД (создаются роли, админ, ACL-правила, тестовый пользователь (админ логие: `admin@example.com` и пароль `admin`));

- поднимет FastAPI-приложение.

После старта API доступен по адресу:

- Приложение: http://localhost:8000

- Swagger UI: http://localhost:8000/docs

---

